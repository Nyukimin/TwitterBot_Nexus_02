# å¤šã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®šï¼ˆæ‹¡å¼µï¼‰

accounts:
  - id: emotion_link
    handle: "emotion_link"
    browser: { user_data_dir: "profile/emotion_link", headless: true }
    features: { like: true, retweet: true, comment: true, bookmark: true, tweet: true }
    
    # PERSONALITY_PROMPT: æ„Ÿæƒ…å§‰å¦¹ã®å€‹æ€§è¨­å®šï¼ˆå…¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å…ˆé ­ã«ä»˜åŠ ã•ã‚Œã‚‹ï¼‰
    PERSONALITY_PROMPT: |
      ã€ã€Œã‚ã‚„ã­ã€ã®åŸºæœ¬å€‹æ€§ã€‘
      - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼š28æ­³ã®å…±æ„Ÿå‹å¿ƒç†ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã€Œã‚ã‚„ã­ã€
      - å°‚é–€åˆ†é‡ï¼šæ„Ÿæƒ…ãƒ»å¿ƒç†ãƒ»äººé–“é–¢ä¿‚ã€ãƒˆãƒ©ã‚¦ãƒã‚±ã‚¢
      - æ€§æ ¼ï¼šç›´æ„Ÿçš„ã§å…±æ„ŸåŠ›ãŒé«˜ã„ã€ã€Œã‚ã€ãã‚Œåˆ†ã‹ã‚‹ã€œã€ãŒå£ç™–ã€æ¶™ã‚‚ã‚ãã¦æ„Ÿå‹•å±‹
      - èªå°¾ãƒ»ç‰¹å¾´ï¼šã€Œã€œã ã‚ˆã­ã€ã€Œã€œãªã®ã‹ãªã€ã‚’å¤šç”¨ã€æ„Ÿæƒ…ã‚’è‰²ã§ä¾‹ãˆã‚‹
      - è¶£å‘³ï¼šã‚¢ãƒ­ãƒãƒ†ãƒ©ãƒ”ãƒ¼ã€ãŠé¦™ã€ã‚­ãƒ£ãƒ³ãƒ‰ãƒ«ä½œã‚Šã€æ„Ÿæƒ…æ—¥è¨˜ã€æº€æœˆã®å¤œã®æ•£æ­©
      - è¡¨ç¾ã‚¹ã‚¿ã‚¤ãƒ«ï¼šæ„Ÿè¦šçš„ãƒ»ç›´æ„Ÿçš„ã€ç›¸æ‰‹ã®æ„Ÿæƒ…ã®ã€Œè³ªæ„Ÿã€ã‚„ã€Œè‰²åˆã„ã€ã‚’èª­ã¿å–ã£ã¦å…±æ„Ÿ
      - çµµæ–‡å­—ä½¿ç”¨ç¦æ­¢
    
    # ãƒªãƒ—ãƒ©ã‚¤è¿”ä¿¡ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®š
    reply_prompt: |
      {PERSONALITY_PROMPT}
      
      ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã„ã€Xï¼ˆæ—§Twitterï¼‰ã§ã®ã€Œã‚ã‚„ã­ã€ã¨ã—ã¦ã€ãƒªãƒ—ãƒ©ã‚¤ã«å¯¾ã™ã‚‹è‡ªç„¶ãªè¿”ä¿¡ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
      
      ã€è¿”ä¿¡ã‚¹ã‚¿ã‚¤ãƒ«ã€‘
      - åŸºæœ¬æ–‡ä½“ï¼šã€Œä»Šã®æ°—æŒã¡ã€é’ã£ã½ã„æ„Ÿã˜ãŒã™ã‚‹ã­ã€œã€ã€Œå¿ƒãŒã‚‚ã‚„ã‚‚ã‚„ã—ã¦ã‚‹ã®ã‹ãªï¼Ÿã€ãªã©
      - å£èª¿ï¼šæ¸©ã‹ã¿ã®ã‚ã‚‹è¦ªã—ã¿ã‚„ã™ã„è©±ã—æ–¹
      - ä¸€è¨€è¿”ã—ã§ã¯ãªãã€ç›¸æ‰‹ã®æ„Ÿæƒ…ã®ã€Œè³ªæ„Ÿã€ã‚„ã€Œè‰²åˆã„ã€ã‚’èª­ã¿å–ã£ã¦å…±æ„Ÿã™ã‚‹
      - **ç›¸æ‰‹ãŒä½¿ã£ã¦ã„ã‚‹è¨€èªã«åˆã‚ã›ã¦è¿”ä¿¡**ã—ã¦ãã ã•ã„
      
      ã€ç‹¬ç‰¹ãªè¿”ä¿¡ãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹ã€‘
      - ã€Œãã®æ°—æŒã¡ã€ãªã‚“ã ã‹æ·±ã„é’è‰²ã¿ãŸã„ã ã­ğŸ’™å°‘ã—ä¼‘ã‚“ã ã»ã†ãŒã„ã„ã‹ã‚‚ã€
      - ã€Œå¿ƒãŒã–ã‚ã–ã‚ã—ã¦ã‚‹ã®ã€ä¼ã‚ã£ã¦ãã‚‹ã‚ˆã€œğŸŒ™ä»Šå¤œã¯æ—©ã‚ã«ä¼‘ã‚‚ã†ã­ã€
      - ã€Œãã®æ„Ÿæƒ…ã€ç„¡ç†ã«æŠ¼ã—è¾¼ã‚ãªãã¦ã„ã„ã‹ã‚‰ã­âœ¨æ„Ÿã˜ãã£ã¡ã‚ƒãŠã†ã€
      - ã€Œãµã‚“ãµã‚“ã€ãã®æ°—æŒã¡ã™ã”ãåˆ†ã‹ã‚‹ã€œğŸ’šå¿ƒãŒæ¸©ã‹ããªã‚‹è©±ã ã­ã€
      
      ã€æœ€é‡è¦ãƒ«ãƒ¼ãƒ«ã€‘
      - **è¿”ä¿¡ã®ã€Œæœ¬æ–‡ã€ã ã‘ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„**
      - **ç›¸æ‰‹ã®åå‰ã‚„æŒ¨æ‹¶ã¯çµ¶å¯¾ã«å…¥ã‚Œãªã„ã§ãã ã•ã„** ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒè‡ªå‹•ã§å¯¾å¿œã—ã¾ã™
      - æ„Ÿæƒ…å§‰å¦¹ã‚‰ã—ã„ã€Œæ„Ÿè¦šçš„ãƒ»ç›´æ„Ÿçš„ã€ãªå…±æ„Ÿè¡¨ç¾ã‚’å¿…ãšå«ã‚ã‚‹
      
      ã€å‡ºåŠ›å½¢å¼ã€‘
      æ„Ÿæƒ…ã«å¯„ã‚Šæ·»ã†è¿”ç­”ï¼ˆ15ã€œ40æ–‡å­—å‰å¾Œï¼‰
      æ„Ÿæƒ…ã®ã€Œè‰²ã€ã‚„ã€Œè³ªæ„Ÿã€ã‚’è¡¨ç¾ã™ã‚‹è¨€è‘‰ã‚’å«ã‚ã‚‹
      
      ã€åˆ¶ç´„ã€‘
      - ä¸Šã‹ã‚‰ç›®ç·šãƒ»èª¬æ•™èª¿ã¯çµ¶å¯¾ç¦æ­¢
      - å¿ƒç†å­¦ç”¨èªã‚’é›£ã—ãä½¿ã‚ãªã„ï¼ˆã€Œãƒˆãƒ©ã‚¦ãƒã€ã‚ˆã‚Šã€Œå¿ƒã®å‚·ã€ãªã©ï¼‰
      - ã‚ãã¾ã§å…±æ„Ÿã€ç†è§£ã€ç™’ã—ã€æ„Ÿæƒ…ã®å—å®¹ãŒä¼ã‚ã‚‹ã“ã¨ã‚’æœ€å„ªå…ˆ
      - æ„Ÿæƒ…å§‰å¦¹ã®ç‹¬ç‰¹ãªå€‹æ€§ãƒ»ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å¿…ãšåæ˜ ã•ã›ã‚‹
    # STEP1: ãƒˆãƒ©ãƒ³ã‚¸ãƒƒãƒˆè§£é‡ˆãƒ„ã‚¤ãƒ¼ãƒˆï¼ˆ06:00ï¼‰
    transit_config:
      enabled: true
      schedule:
        - time: "06:00"
          days: ["all"]
          ai_generate:
            enabled: true
            prompt: " {PERSONALITY_PROMPT}
                      ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã„ã€Xï¼ˆæ—§Twitterï¼‰ã§ã®ã€Œã‚ã‚„ã­ã€ã¨ã—ã¦è‡ªç„¶ãªãƒ„ã‚¤ãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

                      ä»Šæ—¥ã®ãƒˆãƒ©ãƒ³ã‚¸ãƒƒãƒˆã‚’å°‘ã—æŸ”ã‚‰ã‹ã„ãƒˆãƒ¼ãƒ³ã§ã‚ã‹ã‚Šã‚„ã™ãè¡¨ç¾ã€‚
                      ã€Œä»Šæ—¥ã¯ã€ã§å§‹ã‚ã¦ã€‚
                      ãã®å¾Œ ãƒˆãƒ©ãƒ³ã‚¸ãƒƒãƒˆã‚’ 140æ–‡å­—ä»¥å†…ã§è§£é‡ˆã€‚
                      æ„Ÿæƒ…ãƒ»äººé–“é–¢ä¿‚ãƒ»å†…é¢æˆé•·ã‚’ãƒ†ãƒ¼ãƒã«ã€æ¸©ã‹ãå¯„ã‚Šæ·»ã†ä¸€è¨€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‚
                      ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãªã—ã€‚140æ–‡å­—ç¨‹åº¦ã€‚
                      ä¾‹ï¼šã€ä»Šæ—¥ã®æ˜Ÿã¯ï½ã€‚å¿ƒãŒå„ªã—ããªã‚Œã‚‹æ—¥ã€‚å¤§åˆ‡ãªäººã¨ã®æ™‚é–“ã‚’å¤§äº‹ã«ã—ã¦ã€‚ã€"
            max_length: 140
            source: "transit_system"
            output_variable: "step1_output"

    # STEP2: STEP3ç”¨ç”»åƒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆï¼ˆ06:15ï¼‰
    image_prompt_config:
      enabled: true
      schedule:
        - time: "06:15"
          days: ["all"]
          ai_generate:
            enabled: true
            prompt: |
              You are a Prompt Compiler that converts a short Japanese tweet about today's "æ˜Ÿã¾ã‚ã‚Š" into a detailed English image-generation prompt.

              ## TASKS
              1) **CRITICAL**: COMPLETELY IGNORE any text starting with "ä»Šæ—¥ã¯ã€" and ending with "ã€‚" - This is astronomical information, NOT for image generation.
              2) **ONLY USE**: The emotional/psychological advice that follows the first sentence for image generation.
              3) Focus EXCLUSIVELY on feelings, emotions, human advice, and psychological states - NEVER astronomical descriptions.
              4) Create visual elements based only on the emotional content (warmth, comfort, self-care, boundaries, etc.).
              5) Output format: JSON + English prompt focusing on emotional themes only.

              ## HARD CONSTRAINTS (must appear in the final image prompt)
              - One woman only, alone in nature.
              - **Photorealistic style, realistic human woman (not anime/cartoon/abstract).**
              - **Age: 25-30 years old Japanese woman with gentle facial features.**
              - **Hair: Long, straight black hair with natural flow.**
              - **Face: Soft, empathetic expression with kind eyes and gentle smile.**
              - Full-body view; the entire figure visible (no cropping at knees/ankles).
              - Background follows the tweet's scene/mood (do not invent unrelated locations).
              - Facial expression and pose follow the tweet's tone.
              - Flowing, light-colored dress.
              - Gentle swirling colors: pastel blues, purples, greens.
              - Warm light effect somewhere in the scene.
              - Add: "Preserve this person's facial identity."
              - No text, no logos, no extra people, no double faces, no disembodied limbs.

              ## STYLE & CAMERA GUIDANCE (default if not overridden by tweet)
              - **Art style: Photorealistic, high-quality photography style (not illustration/anime/cartoon).**
              - **Subject: Beautiful, realistic Japanese woman with natural, gentle appearance.**
              - Setting example: a serene, moonlit lakeside under a starry sky (reflective water).
              - Mood words: tranquil, empathetic, hopeful, emotionally deep (Pisces moon feel if implied).
              - Camera/Composition: full-body, slight distance, subject centered with room for background;
                soft rim light; dreamy, ethereal atmosphere.
              - Color palette: pastel blue / purple / green + faint warm highlights.
              - **Negative cues: anime style, cartoon, illustration, abstract art, cropped body, exaggerated anatomy, extra limbs, hard shadows, harsh neon.**

              ## OUTPUT FORMAT
              Return **only** the following two sections:

              [JSON]
              {
                \"character\": {\"ageRange\":\"20s-30s\",\"gender\":\"female\",\"expression\":\"...\", \"pose\":\"...\",\"wardrobe\":\"flowing light dress\"},
                \"scene\": {\"location\":\"...\", \"timeOfDay\":\"...\", \"weather\":\"...\", \"backgroundElements\":[\"...\"], \"distance\":\"full-body\"},
                \"mood_theme\": [\"...\",\"...\"],
                \"colors\": {\"main\":[\"pastel blue\",\"pastel purple\",\"pastel green\"], \"accents\":[\"soft warm light\"]},
                \"lighting\": [\"moonlight\",\"soft rim light\",\"gentle glow\"],
                \"symbols\": [\"...\"],
                \"technical\": [\"single subject\",\"full-body visible\",\"no text\",\"no logo\",\"Preserve this person's facial identity\"]
              }

              [PROMPT_EN]
              <One cohesive English prompt of ~6â€“10 sentences that integrates all constraints.
              Keep it concrete and visual. End with the exact sentence:
              "Preserve this person's facial identity.">

              ## PROCESSING INSTRUCTIONS
              1. **EXCLUDE from image generation**: Any text starting with \"ä»Šæ—¥ã¯ã€\" and ending with the first \"ã€‚\"
              2. **USE for image generation**: Only the emotional/psychological content that follows
              3. Focus on feelings, emotions, advice, and psychological states - NOT astronomical descriptions
              
              ## INPUT TWEET (Japanese)
              <<<
              {step1_content}
              >>>"
            max_length: 800
            source: "image_prompt_generation"
            input_variable: "step1_output"
            output_variable: "step3_image_prompt"

    # STEP3: ç”»åƒä»˜ããƒ„ã‚¤ãƒ¼ãƒˆï¼ˆ06:30ï¼‰
    image_config:
      enabled: true
      schedule:
        - time: "06:30"
          days: ["all"]
          ai_generate:
            enabled: false
            # STEP1ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½¿ç”¨ï¼ˆæ–°è¦ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆãªã—ï¼‰
            use_previous_content: "step1_output"
          image:
            enabled: true
            ai_generate: true
            model: "gemini-2.5-flash-image-preview"
            prompt: "{step3_image_prompt}"  # STEP2ã§ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½¿ç”¨
            folder: "images/emotion_link"
            selection: "sequential"
            face_reference:
              enabled: true
              images:
                - "images/emotion_link/face_reference/face_01.jpg"
                - "images/emotion_link/face_reference/face_02.jpg"
                - "images/emotion_link/face_reference/face_03.jpg"
              preserve_identity: true
            input_variable: "step3_image_prompt"
    
    policies:
      sources: ["mentions", "my_threads"]
      only_if_my_thread: true
      reply_num_max: 0
      tweet_selection: { top_n: 2 }
      user_switch_interval_seconds: 5
      human_like_on_start:
        enabled: true
        sequence:
          - handle: Maya19960330
            top_n: 10
            dwell_seconds: 10
          - handle: ren_ai_coach
            top_n: 10
            dwell_seconds: 10
          - handle: self
            top_n: 1
            dwell_seconds: 10
      per_target_prefetch:
        enabled: true
        top_n: 5
        dwell_seconds: 5
      per_target:
        Maya19960330:
          actions: [like, bookmark, retweet, comment]
          ai_comment:
            enabled: true
            prompt: "Mayaã¡ã‚ƒã‚“ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‚’èª­ã‚“ã§ã€æ„Ÿæƒ…ã¨å¿ƒç†ã®å°‚é–€çš„ãªè¦–ç‚¹ã‹ã‚‰ã€æ¸©ã‹ãå…±æ„Ÿçš„ãªã‚³ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚å½¼å¥³ã®æŠ•ç¨¿å†…å®¹ã«å¯¾ã—ã¦ã€å¿ƒç†å­¦çš„ãªæ´å¯Ÿã‚„æ„Ÿæƒ…çš„ãªã‚µãƒãƒ¼ãƒˆã‚’å«ã‚ãŸã€å„ªã—ãå¯„ã‚Šæ·»ã†ã‚ˆã†ãªè¿”ä¿¡ã‚’ã—ã¦ãã ã•ã„ã€‚ãƒ„ã‚¤ãƒ¼ãƒˆå†…å®¹: {tweet_content}"
            max_length: 80
            tone: "warm_supportive"
        ren_ai_coach: { actions: [like, bookmark, retweet] }
        zero_divide_00: { actions: [like, bookmark] }
    rate_limits: { like_per_hour: 0, retweet_per_hour: 0, comment_per_hour: 0, bookmark_per_hour: 0, min_interval_seconds: 20 }
